<!---
Copryight 2017 floragunn GmbH
-->

<h1 id="openssl-setup">OpenSSL setup</h1>

<p>Search Guard supports OpenSSL. Using OpenSSL will result in better performance and better support for strong and modern cipher suites when compared JCE. We recommend to use OpenSSL for production systems.</p>

<h1 id="enabling-openssl">Enabling OpenSSL</h1>

<h2 id="dynamically-linked">Dynamically linked</h2>

<p><strong>(Open SSL and Apache Portable Runtime (apr) needs to be installed)</strong></p>

<ul>
  <li>
    <p>If you are on Alpine Linux please refer to <a href="https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/search-guard/dLr4SYeDMOE/915APogFBQAJ" target="_blank">this post</a>. We recommend to use our statically linked version below because Alpine comes normally with LibreSSL instead of OpenSSL installed. LibreSSL may work but is not officially supported and untested. Also make sure you have installed ‘libuuid’ on Alpine accoring to <a href="https://groups.google.com/forum/#!msg/search-guard/dLr4SYeDMOE/Eai_oWmBBwAJ" target="_blank">this post</a>.</p>
  </li>
  <li>
    <p>Open SSL on Windows may work but is not officially supported and untested. Refer to <a href="http://netty.io/wiki/forked-tomcat-native.html" target="_blank">netty-tcnative wiki</a> for more infos.</p>
  </li>
  <li>Install latest 1.0.2 OpenSSL version on every node (1.0.1 does also work but is outdated and may lack hostname validation functionality). OpenSSL 1.1.x is not supported currently.
    <ul>
      <li><a href="https://www.openssl.org/community/binaries.html" target="_blank">https://www.openssl.org/community/binaries.html</a></li>
    </ul>
  </li>
  <li>Install APR - Apache Portable Runtime on every node
    <ul>
      <li><a href="https://apr.apache.org" target="_blank">https://apr.apache.org</a></li>
      <li>On Debian/Ubuntu, Apache Portable Runtime can be installed with <code class="highlighter-rouge">sudo apt-get install libapr1</code></li>
      <li>On RHEL/CentOS/Fedora, Apache Portable Runtime can be installed with <code class="highlighter-rouge">sudo yum install apr</code></li>
    </ul>
  </li>
  <li>Download netty-tcnative for <strong>your</strong> platform and Search Guard version
    <ul>
      <li>Linux (non fedora based): <code class="highlighter-rouge">_linux-x86_64.jar_</code> (Debian, Ubuntu, …)</li>
      <li>Fedora based linux: <code class="highlighter-rouge">_linux-x86_64-fedora.jar_</code> (RHEL, CentOS, Fedora)</li>
      <li>Mac: <code class="highlighter-rouge">_osx-x86_64.jar_</code></li>
      <li>Windows: <code class="highlighter-rouge">_windows-x86_64.jar_</code></li>
      <li>Alpine: Compile it yourself (or use statically linked version below)</li>
    </ul>
  </li>
  <li><strong>Search Guard 6.1.x (Open SSL 1.0.2):</strong>
    <ul>
      <li>Version: 2.0.5.Final (compiled against Open SSL 1.0.2 which supports hostname validation)</li>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2-dynamic-2.0.5.Final-non-fedora-linux-x86_64.jar" target="_blank">Download for Debian/Ubuntu</a></li>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2-dynamic-2.0.5.Final-fedora-linux-x86_64.jar" target="_blank">Download for CentOS/RHEL/Fedora</a></li>
      <li>Put it into the elasticsearch <code class="highlighter-rouge">plugins/search-guard-/</code> folder on every node</li>
    </ul>
  </li>
  <li><strong>Search Guard 6.1.x (Open SSL 1.0.1):</strong>
    <ul>
      <li>Version: 2.0.5.Final (compiled against Open SSL 1.0.1 which lacks hostname validation)</li>
      <li><a href="http://repo1.maven.org/maven2/io/netty/netty-tcnative/2.0.5.Final" target="_blank">http://repo1.maven.org/maven2/io/netty/netty-tcnative/2.0.5.Final</a></li>
      <li>Choose the correct version for you platform, one of <code class="highlighter-rouge">_linux-x86_64.jar_</code>, <code class="highlighter-rouge">_linux-x86_64-fedora.jar_</code>, <code class="highlighter-rouge">_osx-x86_64.jar_</code> or <code class="highlighter-rouge">_windows-x86_64.jar_</code></li>
      <li>Put it into the elasticsearch <code class="highlighter-rouge">plugins/search-guard-/</code> folder on every node</li>
    </ul>
  </li>
  <li><strong>Search Guard 6.2.x and higher (Open SSL 1.0.2):</strong>
    <ul>
      <li>Version: 2.0.7.Final (compiled against Open SSL 1.0.2 which supports hostname validation)</li>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2-dynamic-2.0.7.Final-non-fedora-linux-x86_64.jar" target="_blank">Download for Debian/Ubuntu</a></li>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2-dynamic-2.0.7.Final-fedora-linux-x86_64.jar" target="_blank">Download for CentOS/RHEL/Fedora</a></li>
      <li>Put it into the elasticsearch <code class="highlighter-rouge">plugins/search-guard-/</code> folder on every node</li>
    </ul>
  </li>
  <li><strong>Search Guard 6.2.x and higher (Open SSL 1.0.1):</strong>
    <ul>
      <li>Version: 2.0.7.Final (compiled against Open SSL 1.0.1 which lacks hostname validation)</li>
      <li><a href="http://repo1.maven.org/maven2/io/netty/netty-tcnative/2.0.7.Final" target="_blank">http://repo1.maven.org/maven2/io/netty/netty-tcnative/2.0.7.Final</a></li>
      <li>Choose the correct version for you platform, one of <code class="highlighter-rouge">_linux-x86_64.jar_</code>, <code class="highlighter-rouge">_linux-x86_64-fedora.jar_</code>, <code class="highlighter-rouge">_osx-x86_64.jar_</code> or <code class="highlighter-rouge">_windows-x86_64.jar_</code></li>
      <li>Put it into the elasticsearch <code class="highlighter-rouge">plugins/search-guard-/</code> folder on every node</li>
    </ul>
  </li>
</ul>

<p>If you update the plugin (or re-install it after removal) don’t forget to add netty-tcnative .jar again</p>

<h2 id="statically-linked-linux-only">Statically linked (Linux only)</h2>

<p><strong>(Does not need Open SSL/Apache Portable Runtime (apr) to be installed on the server)</strong></p>

<ul>
  <li><strong>Search Guard 6.1.x:</strong>
    <ul>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2n-static-2.0.5.Final-alpine-linux-x86_64.jar" target="_blank">Alpine (2.0.5.Final compiled with OpenSSL 1.0.2n)</a></li>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2n-static-2.0.5.Final-non-fedora-linux-x86_64.jar" target="_blank">Debian/Ubuntu (2.0.5.Final compiled with OpenSSL 1.0.2n)</a></li>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2n-static-2.0.5.Final-fedora-linux-x86_64.jar" target="_blank">CentOS/RHEL/Fedora (2.0.5.Final compiled with OpenSSL 1.0.2n)</a>
Put it into the elasticsearch <code class="highlighter-rouge">plugins/search-guard-/</code> folder on every node</li>
    </ul>
  </li>
  <li><strong>Search Guard 6.2.x and higher:</strong>
    <ul>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2n-static-2.0.7.Final-alpine-linux-x86_64.jar" target="_blank">Alpine (2.0.7.Final compiled with OpenSSL 1.0.2n)</a></li>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2n-static-2.0.7.Final-non-fedora-linux-x86_64.jar" target="_blank">Debian/Ubuntu (2.0.7.Final compiled with OpenSSL 1.0.2n)</a></li>
      <li><a href="https://bintray.com/floragunncom/netty-tcnative/download_file?file_path=netty-tcnative-openssl-1.0.2n-static-2.0.7.Final-fedora-linux-x86_64.jar" target="_blank">CentOS/RHEL/Fedora (2.0.7.Final compiled with OpenSSL 1.0.2n)</a>
Put it into the elasticsearch <code class="highlighter-rouge">plugins/search-guard-/</code> folder on every node</li>
    </ul>
  </li>
</ul>

<p>If you update the plugin (or re-install it after removal) don’t forget to add netty-tcnative .jar again</p>

<h2 id="libressl">LibreSSL</h2>

<p>May work well but not officially supported. We have a few static builds <a href="https://dl.bintray.com/floragunncom/netty-tcnative/">here</a> but only consider to use them if you run in trouble with OpenSSL.</p>

<h2 id="boringssl">BoringSSL</h2>

<p>May work well but not officially supported. Binaries are provided <a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22netty-tcnative-boringssl-static%22" target="_blank">here</a> by the netty project.</p>
